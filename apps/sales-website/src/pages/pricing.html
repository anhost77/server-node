<link rel="stylesheet" href="/css/pricing.css" />

<!-- Pricing Page - Optimized for Conversions -->

<!-- Hero Section -->
<section class="pricing-hero">
  <div class="pricing-hero-bg"></div>
  <div class="container">
    <h1 class="animate-fade-in">
      {{pricingPage.hero.title}}
      <span class="gradient-text">{{pricingPage.hero.titleGradient}}</span>
    </h1>
    <p class="subtitle animate-fade-in" style="animation-delay: 0.1s">
      {{pricingPage.hero.subtitle}}
    </p>
  </div>
</section>

<!-- Trust Strip - Security Features -->
<div class="trust-strip">
  <div class="trust-item">
    <span class="trust-icon">üíª</span>
    <span class="trust-text">{{pricingPage.trust.item1}}</span>
  </div>
  <div class="trust-item">
    <span class="trust-icon">üîë</span>
    <span class="trust-text">{{pricingPage.trust.item2}}</span>
  </div>
  <div class="trust-item">
    <span class="trust-icon">üîê</span>
    <span class="trust-text">{{pricingPage.trust.item3}}</span>
  </div>
  <div class="trust-item">
    <span class="trust-icon">üõ°Ô∏è</span>
    <span class="trust-text">{{pricingPage.trust.item4}}</span>
  </div>
</div>

<!-- Pricing Section -->
<section class="section pricing-section">
  <div class="container">
    <!-- Billing Toggle -->
    <div class="billing-toggle-wrapper">
      <div class="billing-toggle">
        <button class="billing-option active" data-billing="monthly">
          {{pricingPage.billing.monthly}}
        </button>
        <button class="billing-option" data-billing="annually">
          {{pricingPage.billing.annually}}
        </button>
      </div>
      <div class="savings-badge" id="savings-badge" style="display: none">
        <span>üí∞</span>
        <span>{{pricingPage.billing.savings}}</span>
      </div>
    </div>

    <!-- Pricing Cards -->
    <div class="pricing-grid-enhanced" id="pricing-cards">
      <!-- Free Tier -->
      <div class="pricing-card-enhanced" data-plan="free">
        <h3 class="pricing-plan-name">{{pricingPage.free.name}}</h3>
        <p class="pricing-plan-desc">{{pricingPage.free.desc}}</p>

        <div class="price-display">
          <span class="price-currency">‚Ç¨</span>
          <span class="price-amount" data-monthly="0" data-annually="0">0</span>
          <span class="price-period">{{pricingPage.perMonth}}</span>
        </div>

        <ul class="pricing-features-enhanced">
          {{#each pricingPage.free.features}}
          <li>
            <span class="feature-check">‚úì</span>
            <span>{{this}}</span>
          </li>
          {{/each}}
        </ul>

        <button type="button" class="pricing-cta pricing-cta-secondary" data-signup-plan="Free">
          {{pricingPage.free.cta}}
        </button>
      </div>

      <!-- Pro Tier - Featured -->
      <div class="pricing-card-enhanced featured" data-plan="pro">
        <div class="pricing-badge-enhanced">{{pricingPage.pro.badge}}</div>

        <h3 class="pricing-plan-name">{{pricingPage.pro.name}}</h3>
        <p class="pricing-plan-desc">{{pricingPage.pro.desc}}</p>

        <div class="price-display">
          <span class="price-currency">‚Ç¨</span>
          <span class="price-amount" data-monthly="9" data-annually="7">9</span>
          <span
            class="price-period"
            data-monthly="{{pricingPage.perMonth}}"
            data-annually="{{pricingPage.perMonth}}"
            >{{pricingPage.perMonth}}</span
          >
        </div>
        <div class="price-old" id="price-old-pro" style="display: none">
          ‚Ç¨9{{pricingPage.perMonth}} ‚Üí ‚Ç¨84{{pricingPage.billing.perYear}}
        </div>

        <ul class="pricing-features-enhanced">
          {{#each pricingPage.pro.features}}
          <li>
            <span class="feature-check">‚úì</span>
            <span class="feature-highlight">{{this}}</span>
          </li>
          {{/each}}
        </ul>

        <button type="button" class="pricing-cta pricing-cta-primary" data-signup-plan="Pro">
          {{pricingPage.pro.cta}}
        </button>
      </div>
    </div>

    <!-- Guarantees / Risk Reversal -->
    <div class="guarantees-section">
      <div class="guarantee-item">
        <div class="guarantee-icon">üìñ</div>
        <span>{{pricingPage.guarantees.openSource}}</span>
      </div>
      <div class="guarantee-item">
        <div class="guarantee-icon">üîê</div>
        <span>{{pricingPage.guarantees.yourData}}</span>
      </div>
      <div class="guarantee-item">
        <div class="guarantee-icon">üö™</div>
        <span>{{pricingPage.guarantees.cancelAnytime}}</span>
      </div>
      <div class="guarantee-item">
        <div class="guarantee-icon">üîì</div>
        <span>{{pricingPage.guarantees.noLockIn}}</span>
      </div>
    </div>
  </div>
</section>

<!-- What ServerFlow Does Well -->
<section class="highlights-section">
  <div class="container">
    <div class="highlights-header reveal">
      <h2>{{pricingPage.highlights.title}}</h2>
      <p>{{pricingPage.highlights.subtitle}}</p>
    </div>

    <div class="highlights-grid reveal">
      <div class="highlight-card">
        <div class="highlight-icon">ü§ñ</div>
        <h3>{{pricingPage.highlights.mcp.title}}</h3>
        <p>{{pricingPage.highlights.mcp.desc}}</p>
      </div>
      <div class="highlight-card">
        <div class="highlight-icon">‚ö°</div>
        <h3>{{pricingPage.highlights.hotPatch.title}}</h3>
        <p>{{pricingPage.highlights.hotPatch.desc}}</p>
      </div>
      <div class="highlight-card">
        <div class="highlight-icon">üîê</div>
        <h3>{{pricingPage.highlights.zeroTrust.title}}</h3>
        <p>{{pricingPage.highlights.zeroTrust.desc}}</p>
      </div>
      <div class="highlight-card">
        <div class="highlight-icon">üí∞</div>
        <h3>{{pricingPage.highlights.pricing.title}}</h3>
        <p>{{pricingPage.highlights.pricing.desc}}</p>
      </div>
      <div class="highlight-card">
        <div class="highlight-icon">üñ•Ô∏è</div>
        <h3>{{pricingPage.highlights.yourInfra.title}}</h3>
        <p>{{pricingPage.highlights.yourInfra.desc}}</p>
      </div>
      <div class="highlight-card">
        <div class="highlight-icon">üìñ</div>
        <h3>{{pricingPage.highlights.openSource.title}}</h3>
        <p>{{pricingPage.highlights.openSource.desc}}</p>
      </div>
    </div>
  </div>
</section>

<!-- Testimonial Quote -->
<div class="pricing-testimonial reveal">
  <blockquote>{{pricingPage.testimonial.quote}}</blockquote>
  <div class="testimonial-author">
    <div class="testimonial-avatar">MK</div>
    <div class="testimonial-info">
      <div class="testimonial-name">{{pricingPage.testimonial.author}}</div>
      <div class="testimonial-role">{{pricingPage.testimonial.role}}</div>
    </div>
  </div>
</div>

<!-- Feature Comparison Table -->
<section class="features-table-section">
  <div class="container">
    <h2 class="reveal">{{pricingPage.featureTable.title}}</h2>

    <div class="features-table-wrapper reveal">
      <table class="features-table">
        <thead>
          <tr>
            <th></th>
            <th>{{pricingPage.free.name}}</th>
            <th>{{pricingPage.pro.name}}</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="has-tooltip">
              {{pricingPage.featureTable.servers}}
              <span class="tooltip">{{pricingPage.featureTable.tooltips.servers}}</span>
            </td>
            <td>1</td>
            <td>5</td>
          </tr>
          <tr>
            <td class="has-tooltip">
              {{pricingPage.featureTable.apps}}
              <span class="tooltip">{{pricingPage.featureTable.tooltips.apps}}</span>
            </td>
            <td>3</td>
            <td>{{pricingPage.featureTable.unlimited}}</td>
          </tr>
          <tr>
            <td class="has-tooltip">
              {{pricingPage.featureTable.mcp}}
              <span class="tooltip">{{pricingPage.featureTable.tooltips.mcp}}</span>
            </td>
            <td class="cross-icon">‚Äî</td>
            <td class="check-icon">‚úì</td>
          </tr>
          <tr>
            <td class="has-tooltip">
              {{pricingPage.featureTable.hotPatch}}
              <span class="tooltip">{{pricingPage.featureTable.tooltips.hotPatch}}</span>
            </td>
            <td class="cross-icon">‚Äî</td>
            <td class="check-icon">‚úì</td>
          </tr>
          <tr>
            <td class="has-tooltip">
              {{pricingPage.featureTable.rollback}}
              <span class="tooltip">{{pricingPage.featureTable.tooltips.rollback}}</span>
            </td>
            <td class="cross-icon">‚Äî</td>
            <td class="check-icon">‚úì</td>
          </tr>
          <tr>
            <td class="has-tooltip">
              {{pricingPage.featureTable.support}}
              <span class="tooltip">{{pricingPage.featureTable.tooltips.support}}</span>
            </td>
            <td>{{pricingPage.featureTable.community}}</td>
            <td>{{pricingPage.featureTable.priority}}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</section>

<!-- FAQ Section -->
<section class="faq-section-enhanced">
  <div class="container">
    <h2 class="reveal">{{pricingPage.faq.title}}</h2>

    <div class="faq-grid-enhanced reveal">
      <div class="faq-item-enhanced">
        <h4>{{pricingPage.faq.q1}}</h4>
        <p>{{pricingPage.faq.a1}}</p>
      </div>
      <div class="faq-item-enhanced">
        <h4>{{pricingPage.faq.q2}}</h4>
        <p>{{pricingPage.faq.a2}}</p>
      </div>
      <div class="faq-item-enhanced">
        <h4>{{pricingPage.faq.q3}}</h4>
        <p>{{pricingPage.faq.a3}}</p>
      </div>
      <div class="faq-item-enhanced">
        <h4>{{pricingPage.faq.q4}}</h4>
        <p>{{pricingPage.faq.a4}}</p>
      </div>
    </div>
  </div>
</section>

<!-- Final CTA -->
{{> sections/cta}}

<!-- Traductions des features pour le JS (inject√©es par le build) -->
<script>
  window.featureTranslations = {
    servers_1: '{{pricingPage.featureKeys.servers_1}}',
    servers_5: '{{pricingPage.featureKeys.servers_5}}',
    servers_unlimited: '{{pricingPage.featureKeys.servers_unlimited}}',
    apps_3: '{{pricingPage.featureKeys.apps_3}}',
    apps_unlimited: '{{pricingPage.featureKeys.apps_unlimited}}',
    ssl_auto: '{{pricingPage.featureKeys.ssl_auto}}',
    github_integration: '{{pricingPage.featureKeys.github_integration}}',
    support_community: '{{pricingPage.featureKeys.support_community}}',
    support_priority: '{{pricingPage.featureKeys.support_priority}}',
    mcp_integration: '{{pricingPage.featureKeys.mcp_integration}}',
    hot_patch: '{{pricingPage.featureKeys.hot_patch}}',
    services_25plus: '{{pricingPage.featureKeys.services_25plus}}',
    basic_support: '{{pricingPage.featureKeys.basic_support}}',
    monitoring: '{{pricingPage.featureKeys.monitoring}}',
    custom_domains: '{{pricingPage.featureKeys.custom_domains}}',
    git_history: '{{pricingPage.featureKeys.git_history}}',
  };
</script>

<!-- Pricing API Script - Charge les plans dynamiquement -->
<script src="/js/pricing.js" defer></script>

<!-- Signup Modal Integration -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Connect pricing CTA buttons to signup modal
    const signupButtons = document.querySelectorAll('[data-signup-plan]');
    signupButtons.forEach((btn) => {
      btn.addEventListener('click', () => {
        const planName = btn.dataset.signupPlan;
        if (window.SignupModal && typeof window.SignupModal.open === 'function') {
          window.SignupModal.open(planName);
        }
      });
    });
  });
</script>

<!-- Pricing Page Animations -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Reveal on scroll
    const revealObserver = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
          }
        });
      },
      { threshold: 0.1 },
    );

    document.querySelectorAll('.reveal').forEach((el) => revealObserver.observe(el));

    // Spotlight effect for Highlights
    const highlightsGrid = document.querySelector('.highlights-grid');
    if (highlightsGrid) {
      highlightsGrid.addEventListener('mousemove', (e) => {
        const cards = highlightsGrid.querySelectorAll('.highlight-card');
        cards.forEach((card) => {
          const rect = card.getBoundingClientRect();
          const x = e.clientX - rect.left;
          const y = e.clientY - rect.top;
          card.style.setProperty('--mouse-x', `${x}px`);
          card.style.setProperty('--mouse-y', `${y}px`);
        });
      });
    }

    // Animation de flottement infinie pour le background
    if (typeof gsap !== 'undefined') {
      gsap.to('.pricing-hero-bg', {
        duration: 25,
        x: '3%',
        y: '2%',
        rotation: 0.01,
        ease: 'sine.inOut',
        repeat: -1,
        yoyo: true,
      });

      gsap.to('.pricing-hero-bg', {
        duration: 18,
        x: '-2%',
        y: '-1%',
        ease: 'sine.inOut',
        repeat: -1,
        yoyo: true,
        delay: 4,
      });
    }
  });
</script>
